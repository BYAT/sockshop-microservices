apiVersion: tekton.dev/v1beta1 
kind: Pipeline
metadata:
  name: front-end-pipeline
spec:
  resources:
    - name: front-end-resource
      type: git
    - name: user-resource
      type: git
  tasks:
    - name: dockr-front-end-pip
      taskRef:               # will start execution immediately
        name: dockr-front-end
      params:
      - name: IMAGE
        value: "bashayr/front-end"
      resources:
        inputs:
        - name: front-end-resource
          resource: front-end-resource
    - name: front-pipe
      taskRef:               #Task 2
        name: front-end-dep-task
      runAfter:
        - dockr-front-end-pip
      params:
      - name: NAMESPACE
        value: "test"
      resources:
        inputs:
        - name: user-resource
          resource: user-resource
    - name: front-pipe-prod
      taskRef:               # Task 3
        name: front-end-dep-task
      runAfter:
        - front-pipe
      params:
      - name: NAMESPACE
        value: "prod"
      resources:
        inputs:
        - name: user-resource
          resource: user-resource
